create table comment (id bigint generated by default as identity, created_at timestamp not null, updated_at timestamp not null, version integer, content clob not null, down_vote_count integer not null, up_vote_count integer not null, user_id bigint not null, parent_comment_id bigint, post_id bigint not null, primary key (id))
create table comment_vote (comment_id bigint not null, user_id bigint not null, score integer not null, primary key (comment_id, user_id))
create table post (id bigint generated by default as identity, created_at timestamp not null, updated_at timestamp not null, version integer, content clob not null, down_vote_count integer not null, up_vote_count integer not null, category varchar(255), comment_count integer not null, kind varchar(255) not null, site varchar(255), title varchar(255) not null, user_id bigint not null, primary key (id))
create table post_vote (post_id bigint not null, user_id bigint not null, score integer not null, primary key (post_id, user_id))
create table user (id bigint generated by default as identity, created_at timestamp not null, updated_at timestamp not null, version integer, about clob, email varchar(255), password_hash varchar(255) not null, point integer not null, role varchar(255) not null, username varchar(255) not null, primary key (id))
alter table user add constraint UK_ob8kqyqqgmefl0aco34akdtpe unique (email)
alter table user add constraint UK_sb8bbouer5wak8vyiiy4pf2bx unique (username)
alter table comment add constraint FK8kcum44fvpupyw6f5baccx25c foreign key (user_id) references user
alter table comment add constraint FKhvh0e2ybgg16bpu229a5teje7 foreign key (parent_comment_id) references comment
alter table comment add constraint FKs1slvnkuemjsq2kj4h3vhx7i1 foreign key (post_id) references post
alter table comment_vote add constraint FKsuhgx7catnt6chnndede0wmpr foreign key (comment_id) references comment
alter table comment_vote add constraint FKmt5fid2gcsvos5bn2gy2vmbrn foreign key (user_id) references user
alter table post add constraint FK72mt33dhhs48hf9gcqrq4fxte foreign key (user_id) references user
alter table post_vote add constraint FK8ph7fgq4u0fto1tjxjrv8108o foreign key (post_id) references post
alter table post_vote add constraint FKcs3po6mpdnbb0qum14vvrnoph foreign key (user_id) references user
